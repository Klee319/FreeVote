-- ==========================================
-- テストデータ投入スクリプト
-- ==========================================

-- テスト用管理者ユーザー
INSERT INTO users (id, email, display_name, role, prefecture_code, age_group)
VALUES 
    ('11111111-1111-1111-1111-111111111111', 'admin@accent-vote.local', '管理者', 'admin', '13', '30s'),
    ('22222222-2222-2222-2222-222222222222', 'moderator@accent-vote.local', 'モデレーター', 'moderator', '27', '40s'),
    ('33333333-3333-3333-3333-333333333333', 'user@accent-vote.local', 'テストユーザー', 'user', '40', '20s')
ON CONFLICT (id) DO NOTHING;

-- テスト用デバイス
INSERT INTO devices (id, fingerprint_hash)
VALUES 
    ('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'test_device_fingerprint_hash_001'),
    ('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'test_device_fingerprint_hash_002')
ON CONFLICT (id) DO NOTHING;

-- テスト用の単語データ（100語）
-- 一般語カテゴリのIDを取得
DO $$
DECLARE
    general_category_id INTEGER;
    word_id INTEGER;
    accent_type_record RECORD;
BEGIN
    SELECT id INTO general_category_id FROM word_categories WHERE name = '一般語';

    -- 基本的な日常語彙
    INSERT INTO words (headword, reading, category_id, mora_count, mora_segments, status, submitted_by, approved_by, approved_at)
    VALUES
        ('雨', 'アメ', general_category_id, 2, '["ア", "メ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('飴', 'アメ', general_category_id, 2, '["ア", "メ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('箸', 'ハシ', general_category_id, 2, '["ハ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('橋', 'ハシ', general_category_id, 2, '["ハ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('端', 'ハシ', general_category_id, 2, '["ハ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('花', 'ハナ', general_category_id, 2, '["ハ", "ナ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('鼻', 'ハナ', general_category_id, 2, '["ハ", "ナ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('山', 'ヤマ', general_category_id, 2, '["ヤ", "マ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('川', 'カワ', general_category_id, 2, '["カ", "ワ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('海', 'ウミ', general_category_id, 2, '["ウ", "ミ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('空', 'ソラ', general_category_id, 2, '["ソ", "ラ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('風', 'カゼ', general_category_id, 2, '["カ", "ゼ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('雲', 'クモ', general_category_id, 2, '["ク", "モ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('蜘蛛', 'クモ', general_category_id, 2, '["ク", "モ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('犬', 'イヌ', general_category_id, 2, '["イ", "ヌ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('猫', 'ネコ', general_category_id, 2, '["ネ", "コ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('魚', 'サカナ', general_category_id, 3, '["サ", "カ", "ナ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('鳥', 'トリ', general_category_id, 2, '["ト", "リ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('虫', 'ムシ', general_category_id, 2, '["ム", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('木', 'キ', general_category_id, 1, '["キ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('森', 'モリ', general_category_id, 2, '["モ", "リ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('林', 'ハヤシ', general_category_id, 3, '["ハ", "ヤ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('草', 'クサ', general_category_id, 2, '["ク", "サ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('葉', 'ハ', general_category_id, 1, '["ハ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('根', 'ネ', general_category_id, 1, '["ネ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('種', 'タネ', general_category_id, 2, '["タ", "ネ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('実', 'ミ', general_category_id, 1, '["ミ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('水', 'ミズ', general_category_id, 2, '["ミ", "ズ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('火', 'ヒ', general_category_id, 1, '["ヒ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('土', 'ツチ', general_category_id, 2, '["ツ", "チ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('石', 'イシ', general_category_id, 2, '["イ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('砂', 'スナ', general_category_id, 2, '["ス", "ナ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('金', 'カネ', general_category_id, 2, '["カ", "ネ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('銀', 'ギン', general_category_id, 2, '["ギ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('銅', 'ドウ', general_category_id, 2, '["ド", "ウ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('鉄', 'テツ', general_category_id, 2, '["テ", "ツ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('塩', 'シオ', general_category_id, 2, '["シ", "オ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('砂糖', 'サトウ', general_category_id, 3, '["サ", "ト", "ウ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('醤油', 'ショウユ', general_category_id, 3, '["ショ", "ウ", "ユ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('味噌', 'ミソ', general_category_id, 2, '["ミ", "ソ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('酒', 'サケ', general_category_id, 2, '["サ", "ケ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('茶', 'チャ', general_category_id, 1, '["チャ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('コーヒー', 'コーヒー', general_category_id, 4, '["コ", "ー", "ヒ", "ー"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ジュース', 'ジュース', general_category_id, 3, '["ジュ", "ー", "ス"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('牛乳', 'ギュウニュウ', general_category_id, 4, '["ギュ", "ウ", "ニュ", "ウ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('パン', 'パン', general_category_id, 2, '["パ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('米', 'コメ', general_category_id, 2, '["コ", "メ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('麺', 'メン', general_category_id, 2, '["メ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('肉', 'ニク', general_category_id, 2, '["ニ", "ク"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('野菜', 'ヤサイ', general_category_id, 3, '["ヤ", "サ", "イ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('果物', 'クダモノ', general_category_id, 4, '["ク", "ダ", "モ", "ノ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('卵', 'タマゴ', general_category_id, 3, '["タ", "マ", "ゴ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('豆腐', 'トウフ', general_category_id, 3, '["ト", "ウ", "フ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('納豆', 'ナットウ', general_category_id, 4, '["ナ", "ッ", "ト", "ウ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('寿司', 'スシ', general_category_id, 2, '["ス", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('天ぷら', 'テンプラ', general_category_id, 4, '["テ", "ン", "プ", "ラ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ラーメン', 'ラーメン', general_category_id, 4, '["ラ", "ー", "メ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('うどん', 'ウドン', general_category_id, 3, '["ウ", "ド", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('そば', 'ソバ', general_category_id, 2, '["ソ", "バ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('カレー', 'カレー', general_category_id, 3, '["カ", "レ", "ー"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ピザ', 'ピザ', general_category_id, 2, '["ピ", "ザ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ハンバーガー', 'ハンバーガー', general_category_id, 6, '["ハ", "ン", "バ", "ー", "ガ", "ー"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('サンドイッチ', 'サンドイッチ', general_category_id, 6, '["サ", "ン", "ド", "イ", "ッ", "チ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('スパゲッティ', 'スパゲッティ', general_category_id, 6, '["ス", "パ", "ゲ", "ッ", "テ", "ィ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('グラタン', 'グラタン', general_category_id, 4, '["グ", "ラ", "タ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('サラダ', 'サラダ', general_category_id, 3, '["サ", "ラ", "ダ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('スープ', 'スープ', general_category_id, 3, '["ス", "ー", "プ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('デザート', 'デザート', general_category_id, 4, '["デ", "ザ", "ー", "ト"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ケーキ', 'ケーキ', general_category_id, 3, '["ケ", "ー", "キ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('クッキー', 'クッキー', general_category_id, 4, '["ク", "ッ", "キ", "ー"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('チョコレート', 'チョコレート', general_category_id, 6, '["チョ", "コ", "レ", "ー", "ト"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('アイスクリーム', 'アイスクリーム', general_category_id, 7, '["ア", "イ", "ス", "ク", "リ", "ー", "ム"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('プリン', 'プリン', general_category_id, 3, '["プ", "リ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ゼリー', 'ゼリー', general_category_id, 3, '["ゼ", "リ", "ー"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ヨーグルト', 'ヨーグルト', general_category_id, 5, '["ヨ", "ー", "グ", "ル", "ト"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('バター', 'バター', general_category_id, 3, '["バ", "タ", "ー"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('チーズ', 'チーズ', general_category_id, 3, '["チ", "ー", "ズ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('マヨネーズ', 'マヨネーズ', general_category_id, 5, '["マ", "ヨ", "ネ", "ー", "ズ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ケチャップ', 'ケチャップ', general_category_id, 4, '["ケ", "チャ", "ッ", "プ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ソース', 'ソース', general_category_id, 3, '["ソ", "ー", "ス"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ドレッシング', 'ドレッシング', general_category_id, 6, '["ド", "レ", "ッ", "シ", "ン", "グ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('スパイス', 'スパイス', general_category_id, 4, '["ス", "パ", "イ", "ス"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ハーブ', 'ハーブ', general_category_id, 3, '["ハ", "ー", "ブ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ニンニク', 'ニンニク', general_category_id, 4, '["ニ", "ン", "ニ", "ク"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('生姜', 'ショウガ', general_category_id, 3, '["ショ", "ウ", "ガ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ワサビ', 'ワサビ', general_category_id, 3, '["ワ", "サ", "ビ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('唐辛子', 'トウガラシ', general_category_id, 5, '["ト", "ウ", "ガ", "ラ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('胡椒', 'コショウ', general_category_id, 3, '["コ", "ショ", "ウ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('シナモン', 'シナモン', general_category_id, 4, '["シ", "ナ", "モ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('バニラ', 'バニラ', general_category_id, 3, '["バ", "ニ", "ラ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ミント', 'ミント', general_category_id, 3, '["ミ", "ン", "ト"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('レモン', 'レモン', general_category_id, 3, '["レ", "モ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('オレンジ', 'オレンジ', general_category_id, 4, '["オ", "レ", "ン", "ジ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('リンゴ', 'リンゴ', general_category_id, 3, '["リ", "ン", "ゴ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('バナナ', 'バナナ', general_category_id, 3, '["バ", "ナ", "ナ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('イチゴ', 'イチゴ', general_category_id, 3, '["イ", "チ", "ゴ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ブドウ', 'ブドウ', general_category_id, 3, '["ブ", "ド", "ウ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('メロン', 'メロン', general_category_id, 3, '["メ", "ロ", "ン"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('スイカ', 'スイカ', general_category_id, 3, '["ス", "イ", "カ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('モモ', 'モモ', general_category_id, 2, '["モ", "モ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('ナシ', 'ナシ', general_category_id, 2, '["ナ", "シ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW()),
        ('カキ', 'カキ', general_category_id, 2, '["カ", "キ"]'::jsonb, 'approved', '11111111-1111-1111-1111-111111111111', '11111111-1111-1111-1111-111111111111', NOW())
    ON CONFLICT (headword, reading) DO NOTHING;
END $$;

-- サンプル投票データの生成
DO $$
DECLARE
    word_record RECORD;
    accent_record RECORD;
    prefecture_record RECORD;
    vote_count INTEGER;
    i INTEGER;
BEGIN
    -- いくつかの単語にサンプル投票を追加
    FOR word_record IN 
        SELECT id FROM words WHERE status = 'approved' LIMIT 20
    LOOP
        -- 各単語に対して各都道府県からランダムに投票
        FOR prefecture_record IN 
            SELECT code FROM prefectures ORDER BY RANDOM() LIMIT 10
        LOOP
            -- ランダムなアクセント型を選択
            SELECT id INTO accent_record FROM accent_types ORDER BY RANDOM() LIMIT 1;
            
            -- ランダムな投票数（1-5）
            vote_count := floor(random() * 5 + 1)::integer;
            
            FOR i IN 1..vote_count LOOP
                INSERT INTO votes (
                    word_id, 
                    accent_type_id, 
                    device_id, 
                    prefecture_code, 
                    age_group, 
                    ip_address,
                    created_at
                )
                VALUES (
                    word_record.id,
                    accent_record.id,
                    CASE WHEN random() > 0.5 
                        THEN 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa'::uuid 
                        ELSE 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb'::uuid 
                    END,
                    prefecture_record.code,
                    CASE floor(random() * 6)::integer
                        WHEN 0 THEN '10s'
                        WHEN 1 THEN '20s'
                        WHEN 2 THEN '30s'
                        WHEN 3 THEN '40s'
                        WHEN 4 THEN '50s'
                        ELSE '60s'
                    END,
                    ('192.168.1.' || floor(random() * 255 + 1))::inet,
                    NOW() - (floor(random() * 30)::integer || ' days')::interval
                )
                ON CONFLICT DO NOTHING;
            END LOOP;
        END LOOP;
    END LOOP;
END $$;

-- マテリアライズドビューをリフレッシュ
REFRESH MATERIALIZED VIEW mv_word_stats_summary;
REFRESH MATERIALIZED VIEW mv_prefecture_summary;