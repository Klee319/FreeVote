@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --foreground-rgb: 0, 0, 0;
    --background-start-rgb: 255, 255, 255;
    --background-end-rgb: 255, 255, 255;
    
    /* ポップオーバー用の変数 */
    --popover: 255, 255, 255; /* white */
    --popover-foreground: 17, 24, 39; /* gray-900 */
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground-rgb: 255, 255, 255;
      --background-start-rgb: 0, 0, 0;
      --background-end-rgb: 0, 0, 0;
      
      /* ダークモード用のポップオーバー変数 */
      --popover: 3, 7, 18; /* gray-950 */
      --popover-foreground: 243, 244, 246; /* gray-100 */
    }
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* カスタムスクロールバー */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded-full;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-400 rounded-full hover:bg-gray-500;
  }
  
  /* アクセント線のアニメーション */
  .accent-line-animation {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: dash 2s ease-in-out forwards;
  }
  
  @keyframes dash {
    to {
      stroke-dashoffset: 0;
    }
  }
  
  /* モーダル内のセレクトボックスのz-index調整 */
  [data-radix-popper-content-wrapper] {
    z-index: 100 !important;
  }
  
  /* セレクトボックスの背景を確実に不透明にする */
  [role="listbox"] {
    @apply bg-white dark:bg-gray-900;
    opacity: 1 !important;
  }
  
  /* ダイアログコンテンツのz-index階層を適切に設定 */
  [role="dialog"] {
    z-index: 50;
  }
  
  /* ドロップダウンメニューがモーダルの上に表示されるように */
  .radix-select-content {
    z-index: 100 !important;
  }
  
  /* ユーザーステータスポップアップの背景を確実に不透明にする */
  [data-radix-collection-item] {
    @apply bg-white dark:bg-gray-950;
  }
  
  /* ドロップダウンメニューコンテンツの背景を強制 */
  [role="menu"] {
    @apply bg-white dark:bg-gray-950;
    opacity: 1 !important;
  }
}

body {
  color: rgb(var(--foreground-rgb));
  background: linear-gradient(
    to bottom,
    transparent,
    rgb(var(--background-end-rgb))
  )
  rgb(var(--background-start-rgb));
  font-family: var(--font-japanese);
}